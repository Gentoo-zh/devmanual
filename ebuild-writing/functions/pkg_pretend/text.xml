<?xml version="1.0"?>
<guide self="ebuild-writing/functions/pkg_pretend/">
<chapter>
<title>pkg_pretend</title>

<body>
<table>
  <tr>
    <th>函数</th>
    <ti><c>pkg_pretend</c></ti>
  </tr>
  <tr>
    <th>用途</th>
    <ti>在 Package 做依赖运算的时候，对软件包进行完整性检验。</ti>
  </tr>
  <tr>
    <th>Sandbox</th>
    <ti>?</ti>
  </tr>
  <tr>
    <th>所需权限</th>
    <ti>root</ti>
  </tr>
  <tr>
    <th>调水调用</th>
    <ti>ebuild</ti>
  </tr>
  <tr>
    <th>EAPI 规约</th>
    <ti>3</ti>
  </tr>
</table>
</body>

<section>
<title>默认 <c>pkg_pretend</c></title>
<body>
<codesample lang="ebuild">
pkg_pretend()
{
    return
}
</codesample>
</body>
</section>

<section>
<title>实例 <c>pkg_pretend</c></title>
<body>
<codesample lang="ebuild">
pkg_pretend() {
	if use kernel_linux ; then
		if [[ -e "${ROOT}"/usr/src/linux/.config ]] ; then
			if kernel_is lt 2 6 30 ; then
				CONFIG_CHECK="FUSE_FS"
				FUSE_FS_ERROR="this is an unrealistic testcase..."
				check_extra_config
			fi
		fi
	fi
}
</codesample>
</body>
</section>

<section>
<title>备注 <c>pkg_pretend</c></title>
<body>
<p>
<c>pkg_pretend</c> 函数常用来做完整性的检验，它在
主函数运行前运行 (指该函数
运行在依赖性检验之后
与安装软件包之前).
它的典型应用就是kernel 配置的检测，必要时调用
<c>eerror</c> 和 <c>die</c> .
<important>
	该函数运行时尚不能保证软件包的依赖都已安装。
</important>
<important>
	<c>pkg_pretend</c> 函数不被主函数调用，其环境变量不能保存.
</important>
</p>
</body>
</section>

</chapter>
</guide>
