<?xml version="1.0"?>
<guide self="ebuild-writing/users-and-groups/">
<chapter>
<title>用户和用户组</title>

<body>
<p>
如果编写的ebuilds 需要某个用户或组添加到 daemon，例如，
this should be performed via the functions available in <c>eutils.eclass</c>.
Regardless of whether you are adding a group or a user, this should be performed
in the <c>pkg_setup</c> function: <c>pkg_setup</c> is sandbox-safe,
is called before the compile process so a build that requires the user to exist will
have it, and is also called for both binary and source packages. You may also 
use the <c>pkg_preinst</c> or <c>pkg_setup</c> functions for user creation, if
the user is not required during or before <c>src_install</c>.
</p>
</body>

<section>
<title>添加用户组</title>
<body>

<p>
添加用户组使用 <c>enewgroup</c> 函数:
</p>

<pre>
enewgroup &lt;name&gt; [gid]
</pre>

<p>
By default the next available group ID is selected. To set a specfic group ID,
pass it an extra argument to <c>enewgroup</c>.
</p>

<note>
Group IDs should rarely be hardcoded. If this is the case, you should
probably check first on gentoo-dev.
</note>

</body>
</section>

<section>
<title>添加用户</title>
<body>

<p>
添加用户使用 <c>enewuser</c> 函数:
</p>

<pre>
enewuser &lt;user&gt; [uid] [shell] [homedir] [groups] [params]
</pre>

<p>
一般情况， <c>enewuser</c> 和 <c>enewgroup</c> 将为新用户或组设定下一个可用的user ID 与 group ID ，否则，你可以为他们添加一个相应的。
</p>

<p>
<c>enewuser</c> 的参数必须如上述: if you do
not want to specify a fixed user ID however but do want to set a specific shell,
for example, use <c>-1</c> for the <c>uid</c> parameter. The same applies for any other
parameter where you want to keep the default setting.
</p>

<p>
Groups for the <c>groups</c> argument should be separated by a comma (<c>,</c>) and
wrapped correctly, for example:
</p>

<pre>
enewuser frozd -1 -1 -1 "backup,frozd"
</pre>

<p>
Finally, any data left over for the <c>params</c> argument is passed directly to
useradd.
</p>

<note>
User IDs should rarely be hardcoded. If this is the case, you should
probably check first on gentoo-dev.
</note>

</body>
</section>

</chapter>
</guide>
